(this.webpackJsonpovertime=this.webpackJsonpovertime||[]).push([[0],{40:function(e,t,n){e.exports=n(55)},46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),s=(n(45),n(46),n(36)),l=n(29),i=n(30),u=n(37),m=n(31),d=n(38),h=n(58),g=n(61),f=n(59),v=n(60),p=n(33),E=n(57),w=n(8),k=n(6),y=n(21),S=n.n(y),C=window.localStorage,P=function(e,t){if("Total"===t)return!0;var n=S()(e[0]),a=t.toLowerCase(),r=S()().startOf(a).valueOf(),o=S()().endOf(a).valueOf();return n.isBetween(r,o)},b=function(e){return"".concat(e.getHours()-1,"h:").concat(e.getMinutes(),"m:").concat(e.getSeconds(),"s")},H=function(e){return new Date(e).toLocaleDateString("de-DE")},A=function(e){return e/1e3/60/60},T=function(e,t){return"".concat(e.replace(/[^a-zA-Z]+/g,"_"),"_").concat(t.toLowerCase(),".csv")},D=function(e){window.confirm("ARE YOU REALLY SURE?")&&C.removeItem("overtime")},U=n(18);function W(e){var t=e.onClick,n=e.variant,a=e.key,o=e.icon,c=e.children,s=e.className;return r.a.createElement(g.a,{onClick:t,variant:n,key:a,className:s},r.a.createElement(w.a,{icon:o}),c)}function O(e){var t=e.preset,n=e.addPreset,a=e.delPresetId,o=r.a.useState(""),c=Object(U.a)(o,2),s=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Presets"),r.a.createElement(E.a,null,r.a.createElement(p.a,{name:"user",value:s,onChange:function(e){return l(e.target.value)}}),r.a.createElement(E.a.Append,null,r.a.createElement(W,{onClick:function(e){return n(s)},icon:k.e})))),t.map((function(e,t){return r.a.createElement(g.a,{key:t,variant:"danger",className:"preset",onClick:a(t)},e)})))}function M(e){var t=e.active,n=e.comment,a=e.changeComment,o=e.swapComment,c=e.preset,s=e.setPreset,l=e.addPreset,i=e.delPreset,u=e.doDeletePreset;return r.a.createElement(E.a,null,r.a.createElement(p.a,{placeholder:"Comment",onChange:a,value:n}),r.a.createElement(E.a.Append,null,t?r.a.createElement(W,{onClick:o,icon:k.g}):null,r.a.createElement(W,{onClick:function(e){return l(n)},icon:k.e}),c.map((function(e){return r.a.createElement(g.a,{key:e,onClick:s(e)},e)})),r.a.createElement(W,{variant:u?"danger":"warning",onClick:i,icon:k.f})))}var N=function(e){var t=e.value,n=e.changeComment,a=r.a.useState(!1),o=Object(U.a)(a,2),c=o[0],s=o[1];return c?r.a.createElement("td",{width:"99999999"},r.a.createElement(E.a,null,r.a.createElement(p.a,{value:t,onChange:n}),r.a.createElement(E.a.Append,null,r.a.createElement(g.a,{onClick:function(e){return s(!1)}},r.a.createElement(w.a,{icon:k.b}))))):r.a.createElement("td",{width:"99999999",onClick:function(e){return s(!0)}},t)};function I(e){var t=e.show,n=e.setShow;return r.a.createElement(g.a,{onClick:function(e){return n(!t)},title:"user / weeklyHours"},r.a.createElement(w.a,{icon:k.a})," ",e.user," / ",e.weeklyHours," hrs")}function L(e){var t=e.show,n=e.setShow,a=e.preset,o=e.addPreset,c=e.delPresetId,s=(e.delPreset,e.user),l=e.changeUser,i=e.weeklyHours,u=e.changeWeeklyHours,m=e.mailToAddress,d=e.setMailToAddress;return t?r.a.createElement(f.a.Dialog,null,r.a.createElement(f.a.Header,null,r.a.createElement(f.a.Title,null,"Settings"),r.a.createElement(g.a,{variant:"danger",className:"pull-right",onClick:D},r.a.createElement(w.a,{icon:k.f}),"\xa0Delete Everything\xa0",r.a.createElement(w.a,{icon:k.f}))),r.a.createElement(f.a.Body,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"User Name"),r.a.createElement(p.a,{name:"user",value:s,onChange:l})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"eMail Target"),r.a.createElement(p.a,{name:"mailToAddress",value:m,onChange:d})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Weekly Hours"),r.a.createElement(E.a,null,r.a.createElement(E.a.Prepend,null,r.a.createElement(p.a,{name:"weeklyHours",value:i,onChange:u})),r.a.createElement(E.a.Append,null,r.a.createElement("span",{className:"input-group-text"},"hrs")))),r.a.createElement(O,{preset:a,addPreset:o,delPresetId:c})),r.a.createElement(f.a.Footer,null,r.a.createElement(g.a,{onClick:function(e){return n(!t)},variant:"primary"},"Save changes"))):null}function j(e){var t=e.active,n=e.start,a=e.toggle,o=new Date(Date.now()-n);return r.a.createElement(g.a,{onClick:a,className:t?"trig active":"trig"},t?b(o):"Start")}var R=function(e){var t=e.list,n=e.mode,a=e.deleteRecord,o=e.changeComment;return r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,t.filter((function(e){return P(e,n)})).map((function(e,t){var n=Object(U.a)(e,3),c=n[0],s=n[1],l=n[2];return r.a.createElement("tr",{key:t},r.a.createElement("td",null,new Date(c).toLocaleDateString("de-DE"),"\xa0",new Date(c).toLocaleTimeString("de-DE")),r.a.createElement("td",null,b(new Date(s))),r.a.createElement(N,{value:l,changeComment:o(t)}),r.a.createElement("td",{width:"1"},r.a.createElement(g.a,{variant:"danger",onClick:a(t)},r.a.createElement(w.a,{icon:k.f}))))}))))};function x(e){e.setState,e.changeUser,e.changeWeeklyHours;var t=e.changeMode,n=(e.showSettings,e.user,e.mode),a=(e.weeklyHours,e.total);e.list,e.active;return r.a.createElement(E.a,{className:"list-controls"},r.a.createElement(E.a.Prepend,null,r.a.createElement("span",{className:"input-group-text"},b(new Date(a)))),r.a.createElement(E.a.Append,null,["Total","Day","Month","Year"].map((function(e){return r.a.createElement(g.a,{variant:e===n?"warning":"primary",key:e,onClick:t(e)},e)}))))}function B(e){var t=e.setState,n=e.changeUser,a=e.changeWeeklyHours,o=(e.changeMode,e.showSettings),c=e.user,s=e.mode,l=e.weeklyHours,i=(e.total,e.list),u=(e.active,e.mailToAddress),m=r.a.useMemo((function(){return"data:text/csv;base64,".concat(btoa(i.filter((function(e){return P(e,s)})).reduce((function(e,t){return e+"".concat(H(t[0]),",").concat(A(t[1]),",").concat(t[2],"\n")}),"")))}),[s,i]),d=r.a.useMemo((function(){return"mailto:?to=".concat(u)+"&subject=".concat(encodeURIComponent("Overtime ".concat(c)))+"&body=".concat(encodeURIComponent("Hi,\nthis is my overtime report as tab separated values,\nyou can copy paste them directly into excel or google docs,\n\nBest regards,\n"+"".concat(c,"\n\n")+"------------------------------------------------\n"+i.filter((function(e){return P(e,s)})).reduce((function(e,t){return e+"".concat(H(t[0]),"\t").concat(A(t[1]),"\t").concat(t[2],"\n")}),"")+"------------------------------------------------\n"))}),[s,i,c,u]);return r.a.createElement(E.a,{className:"list-controls"},r.a.createElement(E.a.Prepend,null,r.a.createElement(I,{show:o,setShow:function(e){return t({showSettings:e})},user:c,changeUser:n,weeklyHours:l,changeWeeklyHours:a})),r.a.createElement(E.a.Append,null,r.a.createElement("a",{className:"btn btn-primary",href:d},r.a.createElement(w.a,{icon:k.d})),r.a.createElement("a",{className:"btn btn-primary",download:T(c,s),href:m},r.a.createElement(w.a,{icon:k.c}))))}var G={list:[],preset:["Work","Prep","Meet"],weeklyHours:32,user:"teacher",delPreset:!1,mode:"Total",showSettings:!1,active:!1,start:null,comment:"",mailToAddress:"boss@digitalcareerinstitute.org"},J=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).push=function(e){return n.setState({list:[e].concat(n.state.list)})},n.delete=function(e){return function(t){n.setState({list:Object(s.a)(n.state.list.filter((function(t,n){return n!==e})))})}},n.changeWeeklyHours=function(e){return n.setState({weeklyHours:parseFloat(e.target.value)})},n.changeMode=function(e){return function(t){return n.setState({mode:e})}},n.changeUser=function(e){return n.setState({user:e.target.value})},n.changeComment=function(e){return function(t){var a=n.state.list;a[e][2]=t.target.value,n.setState({list:a})}},n.swapComment=function(e){n.state.active&&(n.deactivate(),n.setState(n.activate()))},n.toggle=function(e){return n.setState(n.state.active?n.deactivate():n.activate())},n.setTimer=function(e){return n.timer=setInterval((function(e){n.forceUpdate()}),1e3)},n.activate=function(e){return n.setTimer(),{active:!0,start:Date.now()}},n.deactivate=function(e){clearInterval(n.timer);var t=Date.now()-n.state.start;return n.push([Date.now(),t,n.state.comment]),{active:!1,start:Date.now(),comment:""}},n.change=function(e){return n.setState({comment:e.target.value})},n.addPreset=function(e){return n.setState({preset:[e].concat(n.state.preset)})},n.delPreset=function(e){return n.setState({delPreset:!n.state.delPreset})},n.delPresetId=function(e){return function(t){console.log(e),n.setState({delPreset:!1,preset:n.state.preset.filter((function(t,n){return n!==e}))})}},n.setMailToAddress=function(e){return n.setState({mailToAddress:e.target.value})},n.setPreset=function(e){return function(t){return n.state.delPreset?n.delPresetId(n.state.preset.indexOf(e))(t):n.setState({comment:e})}},n.state=function(e){return JSON.parse(C.getItem("overtime")||"null")||e}(G),n.state.active&&n.setTimer(),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){var e;e=this.state,C.setItem("overtime",JSON.stringify(e))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this,t=this.state,n=t.showSettings,a=t.mode,o=t.list,c=t.start,s=t.active,l=t.preset,i=t.user,u=t.weeklyHours,m=t.comment,d=t.mailToAddress,g=o.reduce((function(e,t){return P(t,a)?e+=t[1]:e}),0);return n?r.a.createElement(L,{show:n,setShow:function(t){return e.setState({showSettings:t})},user:i,changeUser:this.changeUser,weeklyHours:u,changeWeeklyHours:this.changeWeeklyHours,preset:l,addPreset:this.addPreset,delPreset:this.delPreset,delPresetId:this.delPresetId,mailToAddress:d,setMailToAddress:this.setMailToAddress}):r.a.createElement(h.a,null,r.a.createElement(B,{list:o,total:g,user:i,changeUser:this.changeUser,mode:a,changeMode:this.changeMode,weeklyHours:u,changeWeeklyHours:this.changeWeeklyHours,setState:this.setState.bind(this),showSettings:this.showSettings,mailToAddress:d}),r.a.createElement(j,{active:s,start:c,toggle:this.toggle}),r.a.createElement(M,{active:s,swapComment:this.swapComment,comment:m,changeComment:this.change,preset:l,addPreset:this.addPreset,setPreset:this.setPreset,delPreset:this.delPreset,doDeletePreset:this.state.delPreset}),r.a.createElement(x,{list:o,total:g,user:i,changeUser:this.changeUser,mode:a,changeMode:this.changeMode,weeklyHours:u,changeWeeklyHours:this.changeWeeklyHours,setState:this.setState.bind(this),showSettings:this.showSettings}),r.a.createElement(R,{list:o,mode:a,changeComment:this.changeComment,deleteRecord:this.delete}))}}]),t}(r.a.Component),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(J,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/overtime",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/overtime","/service-worker.js");F?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Y(t,e)}))}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.35774f76.chunk.js.map